def calc_final_sum(P, r, n, t):
    if P <= 0 or r <= 0 or t <= 0:
        raise ValueError("Все значения должны быть положительными.")
    return round(P * (1 + r / n) ** (n * t), 2)

def safe_write(filename, text):
    """Пробует записать данные в файл, если нет прав — просто пропускает."""
    try:
        with open(filename, "w", encoding="utf-8") as f:
            f.write(text)
    except PermissionError:
        print(f"⚠️ Нет доступа к файлу: {filename}. Пропускаем запись.")

def safe_log(message):
    """Пробует добавить запись в errors.log, если нельзя — игнорирует."""
    try:
        with open("errors.log", "a", encoding="utf-8") as log:
            log.write(message + "\n")
    except PermissionError:
        print("⚠️ Нет доступа к errors.log. Ошибка не записана.")

def main():
    try:
        P = float(input("Введите сумму вклада (тг): "))
        r = float(input("Введите годовую ставку (%): ")) / 100
        t = float(input("Введите срок вклада (в годах): "))
        n = 12

        result = calc_final_sum(P, r, n, t)
        print(f"Итоговая сумма через {t} лет: {result} тг")

        text = (f"Вклад: {P} тг\n"
                f"Ставка: {r * 100}%\n"
                f"Срок: {t} лет\n"
                f"Итоговая сумма: {result} тг\n")


    except ValueError as e:
        print("Ошибка:", e)
        safe_log(f"Ошибка: {e}")
    except Exception as e:
        print("Произошла ошибка:", e)
        safe_log(f"Неизвестная ошибка: {e}")
    finally:
        print("Работа программы завершена.")

if __name__ == "__main__":
    main()